(this["webpackJsonpretro-app"]=this["webpackJsonpretro-app"]||[]).push([[0],{155:function(e,t,a){},156:function(e,t,a){},212:function(e,t){},215:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(0),s=a.n(c),r=a(11),i=a.n(r),o=(a(155),a(156),a(7)),l=a(17),j=a(271),d=a(272),u=a(275),b=a(273),m=a(267),O=a(45),x=a(274),h=a(20),p=a(119),f=a(43),g=a.n(f),v="https://retro-spective-middleterm.herokuapp.com",y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",a=arguments.length>2?arguments[2]:void 0;return g()({method:t,url:v+"/"+e,data:a}).catch((function(e){throw e}))},k=a(13),w=a(291),S=a(266),C=a(264),I=a(265),D=a(263),T=a(132),N=a(120),P=a.n(N);function F(e){return Object(n.jsx)(P.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(n.jsx)(T.a,Object(k.a)({},e))})}function E(e){var t=e.title,a=e.content,s=e.onChoose,r=Object(c.useState)(!0),i=Object(o.a)(r,2),l=i[0],j=i[1];Object(c.useEffect)((function(){j(!0)}),[s]);return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)(w.a,{open:l,onClose:function(){j(!1)},PaperComponent:F,"aria-labelledby":"draggable-dialog-title",children:[Object(n.jsx)(D.a,{style:{cursor:"move"},id:"draggable-dialog-title",children:t}),Object(n.jsx)(C.a,{children:Object(n.jsx)(I.a,{children:a})}),Object(n.jsxs)(S.a,{children:[Object(n.jsx)(m.a,{autoFocus:!0,onClick:function(){j(!1),s(!1)},color:"primary",children:"Cancel"}),Object(n.jsx)(m.a,{onClick:function(){j(!1),s(!0)},color:"primary",children:"OK"})]})]})})}var W=a(292),z=a(289),q=a(269);function R(e){return Object(n.jsx)(z.a,Object(k.a)({elevation:6,variant:"filled"},e))}var _=Object(q.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function B(e){var t=e.reset,a=e.open,r=e.type,i=e.message,l=_(),j=s.a.useState(a),d=Object(o.a)(j,2),u=d[0],b=d[1],m=function(e,t){"clickaway"!==t&&b(!1)};return Object(c.useEffect)((function(){b(a)}),[a,t]),Object(n.jsx)("div",{className:l.root,children:Object(n.jsx)(W.a,{open:u,autoHideDuration:3e3,onClose:m,children:Object(n.jsx)(R,{onClose:m,severity:r,children:i})})})}var A=function(e){var t=Object(c.useState)(0),a=Object(o.a)(t,2),s=a[0],r=a[1],i=Object(c.useState)(null),l=Object(o.a)(i,2),f=l[0],g=l[1],v=Object(c.useState)(!1),k=Object(o.a)(v,2),w=k[0],S=k[1];Object(c.useEffect)((function(){y("tasks/board?id="+e.id,"GET",null).then((function(e){r(e.data.length)}))}),[e.id]);var C=new Date(e.day);return Object(n.jsxs)(n.Fragment,{children:[w?Object(n.jsx)(E,{title:"Delete board",content:"Do you want to delete this board?",onChoose:function(t){t&&y("boards/"+e.id,"DELETE",null).then((function(t){e.onDelete(),S(!1)})),S(!1)}}):Object(n.jsx)(n.Fragment,{}),!0===f?Object(n.jsx)(B,{open:!0,type:"success",message:"Copied"}):Object(n.jsx)(n.Fragment,{}),!1===f?Object(n.jsx)(B,{open:!0,type:"success",message:"Copied"}):Object(n.jsx)(n.Fragment,{}),Object(n.jsxs)(j.a,{style:{border:"1px solid black"},children:[Object(n.jsx)(d.a,{children:Object(n.jsx)(h.b,{to:"/retro-spective-final/boards?id="+e.id,style:{textDecoration:"none",color:"black"},children:Object(n.jsxs)(b.a,{children:[Object(n.jsx)(O.a,{gutterBottom:!0,variant:"h5",component:"h2",children:e.name}),Object(n.jsxs)(x.a,{container:!0,justify:"space-between",children:[Object(n.jsx)(x.a,{item:!0,children:Object(n.jsx)(O.a,{variant:"body2",color:"textSecondary",component:"p",children:C.getDate()+"/"+(C.getMonth()+1)+"/"+C.getFullYear()})}),Object(n.jsx)(x.a,{item:!0,children:Object(n.jsxs)(O.a,{variant:"body2",color:"textSecondary",component:"p",children:[s," tasks"]})})]})]})})}),Object(n.jsx)(u.a,{children:Object(n.jsxs)(x.a,{container:!0,justify:"space-between",children:[Object(n.jsx)(x.a,{item:!0,children:Object(n.jsx)(p.CopyToClipboard,{text:e.url,onCopy:function(){g(!f)},children:Object(n.jsx)(m.a,{size:"small",color:"primary",children:"URL"})})}),Object(n.jsx)(x.a,{item:!0,children:Object(n.jsx)(m.a,{size:"small",color:"primary",onClick:function(){e.onChangeDelete(),S(!0)},children:"Delete"})})]})})]})]})},L=a(286),G=a(285),V=function(e){var t=Object(c.useState)(""),a=Object(o.a)(t,2),s=a[0],r=a[1],i=Object(c.useState)(!1),l=Object(o.a)(i,2),j=l[0],d=l[1],u=Object(c.useState)(!1),b=Object(o.a)(u,2),O=b[0],x=b[1],h=function(){d(!1)};return Object(n.jsxs)(n.Fragment,{children:[O?Object(n.jsx)(B,{open:!0,type:"success",message:"Th\xeam th\xe0nh c\xf4ng"}):Object(n.jsx)(n.Fragment,{}),Object(n.jsx)(m.a,{variant:"outlined",color:"primary",onClick:function(){d(!0),x(!1)},fullWidth:!0,style:{height:"150px"},children:"Add Board"}),Object(n.jsxs)(w.a,{open:j,onClose:h,"aria-labelledby":"form-dialog-title",disableBackdropClick:!0,children:[Object(n.jsx)(D.a,{id:"form-dialog-title",children:"Subscribe"}),Object(n.jsx)(C.a,{children:Object(n.jsx)(G.a,{autoFocus:!0,margin:"dense",id:"name",label:"Board Name",type:"text",fullWidth:!0,value:s,onChange:function(e){var t=e.target.value;r(t)}})}),Object(n.jsxs)(S.a,{children:[Object(n.jsx)(m.a,{onClick:h,color:"primary",children:"Cancel"}),Object(n.jsx)(m.a,{onClick:function(t){""!==s&&(y("boards","POST",{name:s,user:e.userID}).then((function(t){e.onReset(),x(!0)})),r(""),d(!1))},color:"primary",children:"Subscribe"})]})]})]})},Y=function(e){var t=Object(c.useState)([]),a=Object(o.a)(t,2),s=a[0],r=a[1],i=Object(c.useState)(!1),l=Object(o.a)(i,2),j=l[0],d=l[1],u=Object(c.useState)(!1),b=Object(o.a)(u,2),m=b[0],O=b[1];Object(c.useEffect)((function(){y("boards/user/"+e.userID,"GET",null).then((function(e){r(e.data)}))}),[j,e.userID]);var h=function(){d(!j),O(!0)},p=function(){O(!1)};return Object(n.jsxs)("div",{style:{margin:"10px"},children:[m?Object(n.jsx)(B,{open:!0,type:"success",message:"Successfully deleted the board"}):Object(n.jsx)(n.Fragment,{}),Object(n.jsx)("h1",{children:"Board List"}),Object(n.jsxs)(x.a,{container:!0,children:[Object(n.jsx)(x.a,{item:!0,md:2,xs:12,children:Object(n.jsx)(L.a,{mr:2,mt:2,children:Object(n.jsx)(V,{onReset:function(){d(!j)},userID:e.userID})})}),s.map((function(e){return Object(n.jsx)(x.a,{item:!0,md:2,xs:12,children:Object(n.jsx)(L.a,{mr:2,mt:2,children:Object(n.jsx)(A,{name:e.name,id:e._id,day:e.date,url:e.url,onDelete:h,onChangeDelete:p})})},e._id)}))]})]})},J=a(276),U=a(277),M=a(268),H=a(123),K=a.n(H),Q=a(122),X=a.n(Q),Z=a(294),$=a(131),ee=Object(q.a)((function(e){return{root:{flexGrow:1},title:{flexGrow:1}}})),te=function(e){var t=ee(),a=s.a.useState(null),c=Object(o.a)(a,2),r=c[0],i=c[1],l=Boolean(r);return Object(n.jsx)("div",{className:t.root,children:Object(n.jsx)(J.a,{position:"static",children:Object(n.jsxs)(U.a,{children:[Object(n.jsx)(h.b,{to:"/retro-spective-final/",style:{textDecoration:"none",color:"white"},children:Object(n.jsx)(M.a,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"menu",children:Object(n.jsx)(X.a,{})})}),Object(n.jsx)(O.a,{variant:"h6",className:t.title,children:"Retrospective"}),Object(n.jsxs)("div",{children:[Object(n.jsx)(M.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){i(e.currentTarget)},color:"inherit",children:Object(n.jsx)(K.a,{})}),Object(n.jsxs)($.a,{id:"menu-appbar",anchorEl:r,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:l,onClose:function(){i(null)},children:[Object(n.jsx)(h.b,{to:"/retro-spective-final/profile",style:{textDecoration:"none",color:"black"},children:Object(n.jsx)(Z.a,{children:"Profile"})}),Object(n.jsx)(h.b,{to:{pathname:"/login",state:{type:"success",message:"Successfully logged out!",open:!0}},style:{textDecoration:"none",color:"black"},children:Object(n.jsx)(Z.a,{onClick:function(){localStorage.setItem("token",null)},children:"Log out"})})]})]})]})})})},ae=function(e,t){return g.a.get(v+"/"+e,{headers:{Authorization:"Bearer "+t}})},ne=function(){var e=Object(c.useState)(!0),t=Object(o.a)(e,2),a=t[0],s=t[1],r=Object(c.useState)(!1),i=Object(o.a)(r,2),j=i[0],d=i[1],u=Object(c.useState)(!1),b=Object(o.a)(u,2),m=b[0],O=b[1];return Object(c.useEffect)((function(){ae("profile",JSON.parse(localStorage.getItem("token"))).then((function(e){O(e.data.userId),s(!0),d(!0)})).catch((function(e){console.log("L\u1ed7i"),s(!1),d(!0)}))}),[]),j?a?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(te,{}),Object(n.jsx)(Y,{userID:m})]}):Object(n.jsx)(l.a,{to:{pathname:"/retro-spective-final/login",state:{type:"error",message:"You must login!",open:!0}}}):Object(n.jsx)(n.Fragment,{})},ce=a(26),se=a(88),re=a.n(se),ie=a(124),oe=a(278),le=a(51),je=a(126),de=a.n(je),ue=a(61),be=a.n(ue),me=a(74),Oe=a.n(me),xe=function(e){var t=Object(c.useState)(!1),a=Object(o.a)(t,2),s=a[0],r=a[1],i=Object(c.useState)(e.taskInfor.description),l=Object(o.a)(i,2),j=l[0],d=l[1],u="5px solid "+e.background;Object(c.useEffect)((function(){d(e.taskInfor.description),r(!1)}),[e.taskInfor.description]);var b=function(){e.onDeleteTask(e.taskInfor),y("tasks/"+e.taskInfor._id,"DELETE",null).then((function(t){return e.onRealTime()}))},O=function(){r(!0)};return s?Object(n.jsxs)(x.a,{container:!0,justify:"center",style:{border:u},children:[Object(n.jsx)(x.a,{item:!0,xs:11,children:Object(n.jsx)("form",{noValidate:!0,autoComplete:"off",children:Object(n.jsx)(G.a,{id:"textField",value:j,label:"Description",variant:"outlined",size:"small",fullWidth:!0,style:{marginTop:"5px"},onChange:function(e){d(e.target.value)}})})}),Object(n.jsx)(x.a,{item:!0,xs:11,children:Object(n.jsxs)(x.a,{container:!0,justify:"space-between",style:{margin:"4px"},children:[Object(n.jsx)(x.a,{item:!0,children:Object(n.jsx)(m.a,{variant:"contained",size:"small",style:{margin:"2px",backgroundColor:"#76ff03"},onClick:function(){e.onEditTask(e.taskInfor,j),r(!1),y("tasks/edit/"+e.taskInfor._id,"POST",{description:j}).then((function(t){return e.onRealTime()}))},children:"Done"})}),Object(n.jsx)(x.a,{item:!0,children:Object(n.jsx)(M.a,{component:"span",size:"small",style:{margin:"2px"},onClick:b,children:Object(n.jsx)(be.a,{})})})]})})]}):Object(n.jsx)(le.b,{draggableId:e.taskID,index:e.index,isDragDisabled:!e.canDrag,children:function(t,a){return Object(n.jsxs)(x.a,Object(k.a)(Object(k.a)(Object(k.a)({container:!0,ref:t.innerRef},t.draggableProps),t.dragHandleProps),{},{style:(c=a.isDragging,s=t.draggableProps.style,r=e.background,Object(k.a)({userSelect:"none",padding:5,margin:"0 0 ".concat(8,"px 0"),backgroundColor:r,filter:c?"brightness(2)":"brightness(1)"},s)),children:[Object(n.jsx)(x.a,{item:!0,children:e.taskInfor.description}),Object(n.jsxs)(x.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"baseline",children:[Object(n.jsx)(x.a,{item:!0,children:Object(n.jsx)(M.a,{component:"span",size:"small",onClick:O,disabled:!e.canDrag,children:Object(n.jsx)(Oe.a,{})})}),Object(n.jsx)(x.a,{item:!0,children:Object(n.jsx)(M.a,{component:"span",size:"small",onClick:b,disabled:!e.canDrag,children:Object(n.jsx)(be.a,{})})})]})]}));var c,s,r}},e.taskID)},he=function(e){var t="5px solid "+e.color,a=Object(c.useState)(""),s=Object(o.a)(a,2),r=s[0],i=s[1];return Object(n.jsxs)(x.a,{container:!0,justify:"center",style:{border:t},children:[Object(n.jsx)(x.a,{item:!0,xs:11,children:Object(n.jsx)("form",{noValidate:!0,autoComplete:"off",children:Object(n.jsx)(G.a,{id:"textField",value:r,onChange:function(e){var t=e.target.value;i(t)},label:"Description",variant:"outlined",size:"small",fullWidth:!0,style:{marginTop:"5px"}})})}),Object(n.jsx)(x.a,{item:!0,xs:11,children:Object(n.jsxs)(x.a,{container:!0,justify:"space-between",style:{margin:"4px"},children:[Object(n.jsx)(x.a,{item:!0,children:Object(n.jsx)(m.a,{variant:"contained",size:"small",style:{margin:"2px",backgroundColor:"#76ff03"},onClick:function(t){if(""!==r){var a={_id:e.board+e.size+e.value+"fake",board:e.board,description:r,index:e.size,type:e.value};e.onCloseInputTask(),i(""),e.onAddNewTask(a),y("tasks","POST",{type:e.value,description:r,board:e.board}).then((function(t){e.onRealTime()}))}},children:"Add"})}),Object(n.jsx)(x.a,{item:!0,children:Object(n.jsx)(M.a,{component:"span",size:"small",style:{margin:"2px"},onClick:function(){return e.onCloseInputTask()},children:Object(n.jsx)(be.a,{})})})]})})]})},pe=Object(q.a)((function(e){return{root:{display:"flex","& > *":{width:e.spacing(2),height:e.spacing(2)}},load:{display:"flex","& > * + *":{marginLeft:e.spacing(2)}}}})),fe=function(e){var t=pe(),a=Object(c.useState)([]),s=Object(o.a)(a,2),r=s[0],i=s[1],l=Object(c.useState)(-1),j=Object(o.a)(l,2),d=j[0],u=j[1];Object(c.useEffect)((function(){i(e.tasks)}),[e.tasks]);return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)(x.a,{item:!0,md:4,xs:12,children:[Object(n.jsxs)(x.a,{container:!0,alignItems:"center",children:[Object(n.jsx)(x.a,{item:!0,children:Object(n.jsx)(L.a,{className:t.root,children:Object(n.jsx)(T.a,{variant:"outlined",square:!0,style:{background:e.infor.color}})})}),Object(n.jsx)(x.a,{item:!0,children:Object(n.jsx)(O.a,{align:"center",variant:"h6",style:{margin:"0px 8px"},children:e.infor.label})})]}),Object(n.jsx)(m.a,{variant:"contained",fullWidth:!0,onClick:function(){return t=e.columnType,void u(t===d?-1:t);var t},disabled:!e.canDrag,children:Object(n.jsx)(de.a,{})}),d===e.infor.value?Object(n.jsx)(L.a,{mt:2,mb:2,children:Object(n.jsx)(he,{color:e.infor.color,value:e.infor.value,onCloseInputTask:function(){u(-1)},board:e.boardID,size:r.length,onAddNewTask:e.onAddNewTask,onRealTime:e.onRealTime})}):"",Object(n.jsx)(le.c,{droppableId:String(e.columnType),children:function(t,a){return Object(n.jsxs)("div",{ref:t.innerRef,style:(c=a.isDraggingOver,s=e.infor.color,{background:c?"dark"+s:"",padding:"8px 0px"}),children:[r.map((function(t,a){return Object(n.jsx)(L.a,{mt:2,mb:2,children:Object(n.jsx)(xe,{index:a,taskInfor:t,background:e.infor.color,taskID:t._id,onDeleteTask:e.onDeleteTask,onEditTask:e.onEditTask,canDrag:e.canDrag,onRealTime:e.onRealTime})},a)})),t.placeholder]});var c,s}})]})})},ge=a(127),ve=a.n(ge)()(v),ye=Object(q.a)((function(e){return{load:{position:"fixed",top:"50%",left:"50%",zIndex:"100000"}}})),ke=function(e){var t=ye(),a=Object(c.useState)([]),s=Object(o.a)(a,2),r=s[0],i=s[1],l=Object(c.useState)(!1),j=Object(o.a)(l,2),d=j[0],u=j[1],b=Object(c.useState)(!0),m=Object(o.a)(b,2),O=m[0],h=m[1],p=Object(c.useState)(!0),f=Object(o.a)(p,2),g=f[0],v=f[1],k=Object(c.useState)(!0),w=Object(o.a)(k,2),S=w[0],C=w[1],I=Object(c.useState)(!0),D=Object(o.a)(I,2),T=D[0],N=D[1];Object(c.useEffect)((function(){y("boards/"+e.boardID,"GET",null).then((function(e){e.data||C(!1)}))}),[e.boardID]),Object(c.useEffect)((function(){(function(){var t=Object(ie.a)(re.a.mark((function t(){var a;return re.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y("columns","GET",null);case 2:return a=t.sent.data,t.next=5,ve.emit("msgToServer",e.boardID);case 5:ve.on("msgToClient",(function(t){var n=t.tasks,c=t.boardID;if(e.boardID===c){var s=a.map((function(e){var t=n.filter((function(t){return t.type===e.value})).sort((function(e,t){return e.index-t.index}));return{column:e,tasks:t}}));i(s)}})),v(!1),h(!0);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()(),!0===d&&setTimeout((function(){return u(!1)}),3e3)}),[T,e.boardID,d]);var P=function(e){console.log(e);var t=r.map((function(t){return t.column.value===e.type&&t.tasks.splice(e.index,0,e),t}));i(t),h(!1),v(!0)},F=function(e){var t=r.map((function(t){if(t.column.value===e.type){t.tasks.splice(e.index,1);for(var a=e.index;a<t.tasks.length;a++)t.tasks[a].index=a}return t}));i(t),h(!1),v(!0)},E=function(e,t){var a=r.map((function(a){return a.tasks.map((function(a){return a._id===e._id&&(a.description=t),a})),a}));i(a),h(!1),v(!0)},W=function(){N(!T)};return S?Object(n.jsxs)(n.Fragment,{children:[g?Object(n.jsx)("div",{className:t.load,children:Object(n.jsx)(oe.a,{color:"secondary"})}):Object(n.jsx)(n.Fragment,{}),Object(n.jsxs)(x.a,{container:!0,spacing:2,style:g?{opacity:"0.5"}:{},children:[Object(n.jsx)(B,{open:d,type:"error",message:"B\u1ea1n thao t\xe1c nhanh qu\xe1, t\xf4i kh\xf4ng x\u1eed l\xfd k\u1ecbp"}),Object(n.jsx)(le.a,{onDragEnd:function(t){var a=t.source,n=t.destination;if(console.log(t),null!==n)if(h(!1),v(!0),a.droppableId!==n.droppableId){var c=Object(ce.a)(r),s=c[Number(a.droppableId)].tasks.splice(a.index,1),l=Object(o.a)(s,1)[0];l.type=Number(n.droppableId);for(var j=a.index;j<c[Number(a.droppableId)].tasks.length;j++)c[Number(a.droppableId)].tasks[j].index=j;c[Number(n.droppableId)].tasks.splice(n.index,0,l);for(var d=n.index;d<c[Number(n.droppableId)].tasks.length;d++)c[Number(n.droppableId)].tasks[d].index=d;i(c),y("tasks/move","POST",{boardID:e.boardID,columnSource:Number(a.droppableId),columnDestination:Number(n.droppableId),indexSource:a.index,indexDestination:n.index}).then((function(e){h(!0),W(),v(!1)})).catch((function(e){N(!T),u(!0),v(!1)}))}else{var b=r.map((function(e){if(e.column.value===Number(a.droppableId)){var t=Object(ce.a)(e.tasks),c=t.splice(a.index,1),s=Object(o.a)(c,1)[0];t.splice(n.index,0,s);for(var r=a.index>n.index?n.index:a.index;r<t.length;r++)t[r].index=r;e.tasks=t}return e}));i(b),y("tasks/reorder","POST",{boardID:e.boardID,column:Number(a.droppableId),indexSource:a.index,indexDestination:n.index}).then((function(e){h(!0),W(),v(!1)})).catch((function(e){N(!T),u(!0),v(!1)}))}else console.log("error")},children:r.map((function(t){return Object(n.jsx)(fe,{infor:t.column,boardID:e.boardID,columnType:t.column.value,tasks:t.tasks,onAddNewTask:P,onDeleteTask:F,onEditTask:E,onRealTime:W,canDrag:O},t.column._id)}))})]})]}):Object(n.jsx)("h1",{children:"This board does not exist"})},we=function(e){return Object(n.jsx)(L.a,{style:{margin:"16px"},children:Object(n.jsx)(ke,{boardID:e.boardID})})},Se=function(e){var t=Object(c.useState)(!1),a=Object(o.a)(t,2),s=a[0],r=a[1],i=Object(c.useState)(""),l=Object(o.a)(i,2),j=l[0],d=l[1],u=Object(c.useState)(""),b=Object(o.a)(u,2),h=b[0],p=b[1];Object(c.useEffect)((function(){y("boards/"+e.boardID,"GET",null).then((function(e){d(e.data.name),p(e.data.name)}))}),[e.boardID]);var f=function(){p(j),r(!s)};return Object(n.jsx)(x.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",style:{backgroundColor:"white"},children:Object(n.jsx)(x.a,{item:!0,style:{margin:"8px 16px"},children:Object(n.jsx)(x.a,{container:!0,children:s?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(x.a,{item:!0,children:Object(n.jsx)(G.a,{id:"outlined-textarea",label:"Board Name",placeholder:"Board Name",variant:"outlined",size:"small",style:{margin:"-4px 0px"},value:h,onChange:function(e){return p(e.target.value)}})}),Object(n.jsx)(x.a,{item:!0,children:Object(n.jsx)(m.a,{variant:"contained",color:"primary",size:"small",style:{margin:"0px 20px"},onClick:function(){""!==h&&y("boards/edit/"+e.boardID,"POST",{name:h}).then((function(e){r(!1),d(h)}))},children:"Save"})}),Object(n.jsx)(x.a,{item:!0,children:Object(n.jsx)(m.a,{size:"small",onClick:f,children:"Cancel"})})]}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(x.a,{item:!0,children:Object(n.jsx)(O.a,{variant:"h6",children:j})}),Object(n.jsx)(x.a,{item:!0,children:Object(n.jsx)(M.a,{component:"span",size:"small",style:{margin:"0px 8px"},onClick:f,children:Object(n.jsx)(Oe.a,{})})})]})})})})},Ce=function(e){var t=Object(c.useState)(null),a=Object(o.a)(t,2),s=a[0],r=a[1];return Object(c.useEffect)((function(){e.location&&r(new URLSearchParams(e.location.search).get("id"))}),[e.location]),Object(n.jsxs)("div",{children:[Object(n.jsx)(te,{}),null!==s?Object(n.jsx)(Se,{boardID:s}):"",null!==s?Object(n.jsx)(we,{boardID:s}):""]})},Ie=a(8),De=a(293),Te=a(280),Ne=a(281),Pe=a(290),Fe=a(75),Ee=a.n(Fe),We=a(279),ze=a(130),qe=a.n(ze),Re=a(128),_e=a.n(Re),Be=a(129),Ae=a.n(Be),Le=Object(q.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},button:{margin:e.spacing(1)}}}));function Ge(e){var t=Object(c.useState)(!1),a=Object(o.a)(t,2),s=a[0],r=a[1],i=Object(c.useState)({email:"",password:""}),j=Object(o.a)(i,2),d=j[0],u=j[1],b=Object(c.useState)(!1),p=Object(o.a)(b,2),f=p[0],w=p[1],S=Le(),C=function(e){var t=e.target,a=t.name,n=t.value;u(Object(k.a)(Object(k.a)({},d),{},Object(Ie.a)({},a,n)))};return s?Object(n.jsx)(l.a,{to:"/retro-spective-final/"}):Object(n.jsxs)(We.a,{component:"main",maxWidth:"xs",children:[e.location.state?Object(n.jsx)(B,{open:e.location.state.open,type:e.location.state.type,message:e.location.state.message}):Object(n.jsx)(n.Fragment,{}),Object(n.jsx)(B,{open:f,type:"error",message:"Wrong account or password"}),Object(n.jsx)(Te.a,{}),Object(n.jsxs)("div",{className:S.paper,children:[Object(n.jsx)(De.a,{className:S.avatar,children:Object(n.jsx)(Ee.a,{})}),Object(n.jsx)(O.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(n.jsxs)("form",{className:S.form,noValidate:!0,children:[Object(n.jsx)(G.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:d.email,onChange:C}),Object(n.jsx)(G.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:d.password,onChange:C}),Object(n.jsxs)(x.a,{container:!0,justify:"space-between",alignItems:"center",children:[Object(n.jsx)(x.a,{item:!0,children:Object(n.jsx)(Ne.a,{control:Object(n.jsx)(Pe.a,{value:"remember",color:"primary"}),label:"Remember me"})}),Object(n.jsx)(x.a,{item:!0,children:Object(n.jsx)(h.b,{to:"#",variant:"body2",children:"Forgot password?"})})]}),Object(n.jsx)(m.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:S.submit,onClick:function(e){e.preventDefault(),w(!1),y("auth/login","POST",{email:d.email,password:d.password}).then((function(e){localStorage.setItem("token",JSON.stringify(e.data.access_token)),r(!0)})).catch((function(e){w(!0)}))},children:"Sign In"})]}),Object(n.jsx)(O.a,{component:"p",variant:"h6",children:"Or login with"}),Object(n.jsxs)(x.a,{container:!0,justify:"space-between",children:[Object(n.jsx)(x.a,{item:!0,children:Object(n.jsx)(Ae.a,{appId:"2654369511482506",autoLoad:!1,callback:function(e){"unknown"!==e.status&&g.a.get(v+"/facebook",{headers:{accessToken:e.accessToken,userID:e.userID}}).then((function(e){localStorage.setItem("token",JSON.stringify(e.data.access_token)),r(!0)})).catch((function(e){w(!0)}))},render:function(e){return Object(n.jsx)(m.a,{onClick:e.onClick,variant:"contained",className:S.button,startIcon:Object(n.jsx)(qe.a,{style:{color:"blue"}}),style:{color:"blue"},children:"Facebook"})}})}),Object(n.jsx)(x.a,{item:!0,children:Object(n.jsx)(_e.a,{clientId:"384818698512-6un3oj0o5bvhpah1qcrkhcjctv2a6djl.apps.googleusercontent.com",buttonText:"Google",onSuccess:function(e){g.a.get(v+"/google",{headers:{Authorization:e.tokenId}}).then((function(e){localStorage.setItem("token",JSON.stringify(e.data.access_token)),r(!0)})).catch((function(e){w(!0)}))},onFailure:function(e){return console.log(e)},cookiePolicy:"single_host_origin"})})]}),Object(n.jsx)(h.b,{to:"/retro-spective-final/signup",style:{margin:"24px 0px 0px 0px",color:"#3f51b5"},children:"Don't have an account? Sign Up"})]})]})}var Ve=Object(q.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}})),Ye=function(){var e=Ve(),t=Object(c.useState)(!1),a=Object(o.a)(t,2),s=a[0],r=a[1],i=Object(c.useState)({value:!1,message:""}),j=Object(o.a)(i,2),d=j[0],u=j[1],b=Object(c.useState)({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",agreeTerm:!1}),p=Object(o.a)(b,2),f=p[0],g=p[1],v=function(e){var t=e.target,a=t.name,n="agreeTerm"===a?t.checked:t.value;g(Object(k.a)(Object(k.a)({},f),{},Object(Ie.a)({},a,n))),d.value&&u({value:!1,message:""})};return s?Object(n.jsx)(l.a,{to:{pathname:"/retro-spective-final/login",state:{type:"success",message:"Successful registration, login now!",open:!0}}}):Object(n.jsxs)(We.a,{component:"main",maxWidth:"xs",children:[Object(n.jsx)(B,{open:d.value,type:"error",message:d.message}),Object(n.jsx)(Te.a,{}),Object(n.jsxs)("div",{className:e.paper,children:[Object(n.jsx)(De.a,{className:e.avatar,children:Object(n.jsx)(Ee.a,{})}),Object(n.jsx)(O.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(n.jsxs)("form",{className:e.form,noValidate:!0,onSubmit:function(e){e.preventDefault(),""!==f.firstName&&""!==f.lastName&&""!==f.email&&""!==f.password&&""!==f.confirmPassword?f.password.length<8?u({value:!0,message:"Your password should contain at least 8 chars"}):f.agreeTerm?f.password===f.confirmPassword?y("users","POST",{firstName:f.firstName,lastName:f.lastName,email:f.email,password:f.password}).then((function(e){null===e.data.id?u({value:!0,message:"Account already exists!"}):r(!0)})):u({value:!0,message:"Password and confirm password are identical"}):u({value:!0,message:"You must agree with our Term"}):u({value:!0,message:"You need to fill in all the details"})},children:[Object(n.jsxs)(x.a,{container:!0,spacing:2,children:[Object(n.jsx)(x.a,{item:!0,xs:12,sm:6,children:Object(n.jsx)(G.a,{autoComplete:"fname",name:"firstName",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"First Name",autoFocus:!0,onChange:v,value:f.firstName})}),Object(n.jsx)(x.a,{item:!0,xs:12,sm:6,children:Object(n.jsx)(G.a,{variant:"outlined",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"lname",onChange:v,value:f.lastName})}),Object(n.jsx)(x.a,{item:!0,xs:12,children:Object(n.jsx)(G.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",onChange:v,value:f.email})}),Object(n.jsxs)(x.a,{item:!0,xs:12,children:[Object(n.jsx)(G.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:v,value:f.password}),Object(n.jsx)("p",{style:{fontStyle:"italic",fontSize:"80%"},children:" Should contain at least 8 chars!"})]}),Object(n.jsxs)(x.a,{item:!0,xs:12,children:[Object(n.jsx)(G.a,{variant:"outlined",required:!0,fullWidth:!0,name:"confirmPassword",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:v,value:f.confirmPassword}),Object(n.jsx)("p",{style:{fontStyle:"italic",fontSize:"80%"},children:" Should contain at least 8 chars!"})]}),Object(n.jsx)(x.a,{item:!0,xs:12,children:Object(n.jsx)(Ne.a,{control:Object(n.jsx)(Pe.a,{name:"agreeTerm",checked:f.agreeTerm,onChange:v,color:"primary"}),label:"By signing up you agree to our Terms and Privacy Policy"})})]}),Object(n.jsx)(m.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,children:"Sign Up"}),Object(n.jsx)(x.a,{container:!0,justify:"flex-end",children:Object(n.jsx)(x.a,{item:!0,children:Object(n.jsx)(h.b,{to:"/retro-spective-final/login",style:{margin:"24px 0px 0px 0px",color:"#3f51b5"},children:"Already have an account? Sign in"})})})]})]})]})},Je=a(3),Ue=a(282),Me=Object(q.a)((function(){return{root:{},avatar:{height:100,width:100}}})),He=function(e){var t=e.user,a=Me();return Object(n.jsxs)(j.a,{children:[Object(n.jsx)(b.a,{children:Object(n.jsxs)(L.a,{alignItems:"center",display:"flex",flexDirection:"column",children:[Object(n.jsx)(De.a,{className:a.avatar}),Object(n.jsx)(O.a,{color:"textPrimary",gutterBottom:!0,variant:"h3",children:t.firstName+" "+t.lastName}),Object(n.jsx)(O.a,{color:"textSecondary",variant:"body1"}),Object(n.jsx)(O.a,{className:a.dateText,color:"textSecondary",variant:"body1",children:t.email})]})}),Object(n.jsx)(Ue.a,{}),Object(n.jsx)(u.a,{children:Object(n.jsx)(m.a,{color:"primary",fullWidth:!0,variant:"text",children:"Upload picture"})})]})},Ke=a(283),Qe=function(e){var t=e.user;return Object(n.jsx)("form",{autoComplete:"off",noValidate:!0,children:Object(n.jsxs)(j.a,{children:[Object(n.jsx)(Ke.a,{title:"Profile"}),Object(n.jsx)(Ue.a,{}),Object(n.jsx)(b.a,{children:Object(n.jsxs)(x.a,{container:!0,spacing:3,children:[Object(n.jsx)(x.a,{item:!0,md:6,xs:12,children:Object(n.jsx)(G.a,{fullWidth:!0,helperText:"Please specify the first name",label:"First name",name:"firstName",required:!0,value:t.firstName,variant:"outlined",disabled:!0})}),Object(n.jsx)(x.a,{item:!0,md:6,xs:12,children:Object(n.jsx)(G.a,{fullWidth:!0,label:"Last name",name:"lastName",required:!0,value:t.lastName,variant:"outlined",disabled:!0})}),Object(n.jsx)(x.a,{item:!0,md:6,xs:12,children:Object(n.jsx)(G.a,{fullWidth:!0,label:"Email Address",name:"email",required:!0,value:t.email,variant:"outlined",disabled:!0})}),Object(n.jsx)(x.a,{item:!0,md:6,xs:12,children:Object(n.jsx)(G.a,{fullWidth:!0,label:"Phone Number",name:"phone",type:"number",value:t.phone,variant:"outlined",disabled:!0})})]})})]})})},Xe=function(e){var t=e.user,a=e.onReset,s=Object(c.useState)({firstName:"",lastName:"",email:"",phone:""}),r=Object(o.a)(s,2),i=r[0],l=r[1],d=Object(c.useState)(!1),u=Object(o.a)(d,2),O=u[0],h=u[1],p=Object(c.useState)(!1),f=Object(o.a)(p,2),g=f[0],v=f[1];Object(c.useEffect)((function(){l({firstName:t.firstName,lastName:t.lastName,email:t.email,phone:t.phone})}),[t]);var w=function(e){l(Object(k.a)(Object(k.a)({},i),{},Object(Ie.a)({},e.target.name,e.target.value)))};return Object(n.jsxs)(n.Fragment,{children:[O?Object(n.jsx)(E,{title:"Change Information",content:"Do you want to change these informations?",onChoose:function(e){e?y("users/edit/"+t._id,"POST",i).then((function(e){h(!1),v(!0),a()})):h(!1)}}):Object(n.jsx)(n.Fragment,{}),g?Object(n.jsx)(B,{open:!0,type:"success",message:"successful change"}):Object(n.jsx)(n.Fragment,{}),Object(n.jsx)("form",{autoComplete:"off",noValidate:!0,children:Object(n.jsxs)(j.a,{children:[Object(n.jsx)(Ke.a,{title:"Update Information",subheader:"The information can be edited"}),Object(n.jsx)(Ue.a,{}),Object(n.jsx)(b.a,{children:Object(n.jsxs)(x.a,{container:!0,spacing:3,children:[Object(n.jsx)(x.a,{item:!0,md:6,xs:12,children:Object(n.jsx)(G.a,{fullWidth:!0,helperText:"Please specify the first name",label:"First name",name:"firstName",onChange:w,required:!0,value:i.firstName,variant:"outlined"})}),Object(n.jsx)(x.a,{item:!0,md:6,xs:12,children:Object(n.jsx)(G.a,{fullWidth:!0,label:"Last name",name:"lastName",onChange:w,required:!0,value:i.lastName,variant:"outlined"})}),Object(n.jsx)(x.a,{item:!0,md:6,xs:12,children:Object(n.jsx)(G.a,{fullWidth:!0,label:"Email Address",name:"email",onChange:w,required:!0,value:i.email,variant:"outlined",disabled:!0})}),Object(n.jsx)(x.a,{item:!0,md:6,xs:12,children:Object(n.jsx)(G.a,{fullWidth:!0,label:"Phone Number",name:"phone",onChange:w,type:"number",value:i.phone,variant:"outlined"})})]})}),Object(n.jsx)(Ue.a,{}),Object(n.jsx)(L.a,{display:"flex",justifyContent:"flex-end",p:2,children:Object(n.jsx)(m.a,{color:"primary",variant:"contained",onClick:function(e){e.preventDefault(),v(!1),h(!0)},children:"Save details"})})]})})]})},Ze=function(e){var t=e.user,a=Object(c.useState)({oldPassword:"",newPassword:"",confirmPassword:""}),s=Object(o.a)(a,2),r=s[0],i=s[1],d=Object(c.useState)(!1),u=Object(o.a)(d,2),O=u[0],h=u[1],p=Object(c.useState)(!1),f=Object(o.a)(p,2),g=f[0],v=f[1],w=Object(c.useState)({value:!1,message:""}),S=Object(o.a)(w,2),C=S[0],I=S[1],D=function(e){i(Object(k.a)(Object(k.a)({},r),{},Object(Ie.a)({},e.target.name,e.target.value)))};return g?Object(n.jsx)(l.a,{to:{pathname:"/retro-spective-final/login",state:{type:"success",message:"Password changed successfully, please log in again!",open:!0}}}):Object(n.jsxs)(n.Fragment,{children:[O?Object(n.jsx)(E,{title:"Change Information",content:"Do you want to change these informations?",onChoose:function(e){if(e){if(""===r.oldPassword||""===r.confirmPassword||""===r.newPassword)return I({value:!0,message:"You need to fill in all the details"}),void h(!1);if(r.newPassword.length<8)return I({value:!0,message:"Your new password should contain at least 8 chars"}),void h(!1);if(r.newPassword!==r.confirmPassword)return I({value:!0,message:"Password and confirm password are identical"}),void h(!1);y("users/change-password/"+t._id,"POST",{oldPassword:r.oldPassword,newPassword:r.newPassword}).then((function(e){e.data?(v(!0),h(!1)):I({value:!0,message:"Old password is invalid"})})),h(!1)}else h(!1)}}):Object(n.jsx)(n.Fragment,{}),C.value?Object(n.jsx)(B,{open:!0,type:"error",message:C.message}):Object(n.jsx)(n.Fragment,{}),Object(n.jsx)("form",{autoComplete:"off",noValidate:!0,children:Object(n.jsxs)(j.a,{children:[Object(n.jsx)(Ke.a,{title:"Change Password"}),Object(n.jsx)(Ue.a,{}),Object(n.jsx)(b.a,{children:Object(n.jsxs)(x.a,{container:!0,spacing:3,children:[Object(n.jsx)(x.a,{item:!0,md:6,xs:12,children:Object(n.jsx)(G.a,{fullWidth:!0,helperText:"Should contain at least 8 chars!",label:"Old Password",name:"oldPassword",type:"password",onChange:D,required:!0,value:r.oldPassword,variant:"outlined"})}),Object(n.jsx)(x.a,{item:!0}),Object(n.jsx)(x.a,{item:!0,md:6,xs:12,children:Object(n.jsx)(G.a,{fullWidth:!0,helperText:"Should contain at least 8 chars!",label:"New Password",name:"newPassword",type:"password",onChange:D,required:!0,value:r.newPassword,variant:"outlined"})}),Object(n.jsx)(x.a,{item:!0}),Object(n.jsx)(x.a,{item:!0,md:6,xs:12,children:Object(n.jsx)(G.a,{fullWidth:!0,helperText:"Should contain at least 8 chars!",label:"Confirm Password",name:"confirmPassword",type:"password",onChange:D,required:!0,value:r.confirmPassword,variant:"outlined"})}),Object(n.jsx)(x.a,{item:!0})]})}),Object(n.jsx)(Ue.a,{}),Object(n.jsx)(L.a,{display:"flex",justifyContent:"flex-end",p:2,children:Object(n.jsx)(m.a,{color:"primary",variant:"contained",onClick:function(e){e.preventDefault(),v(!1),h(!0),I({value:!1,message:""})},children:"Save Password"})})]})})]})},$e=a(287),et=a(284),tt=Object(q.a)((function(e){return{tabs:{borderRight:"1px solid ".concat(e.palette.divider)}}}));function at(e){var t=tt(),a=s.a.useState(0),c=Object(o.a)(a,2),r=c[0],i=c[1];return Object(n.jsx)(L.a,{mt:5,children:Object(n.jsx)(j.a,{children:Object(n.jsx)(b.a,{children:Object(n.jsxs)($e.a,{orientation:"vertical",value:r,variant:"fullWidth",onChange:function(t,a){i(a),e.onChangeValue(a)},"aria-label":"Vertical tabs example",className:t.tabs,children:[Object(n.jsx)(et.a,{label:"Profile",maxwidth:"true"}),Object(n.jsx)(et.a,{label:"Update Information",maxwidth:"true"}),Object(n.jsx)(et.a,{label:"Change Password",maxwidth:"true"})]})})})})}var nt=function(e){var t=e.children,a=e.value,c=e.index,s=Object(Je.a)(e,["children","value","index"]);return Object(n.jsx)(L.a,Object(k.a)(Object(k.a)({role:"tabpanel",hidden:a!==c,id:"vertical-tabpanel-".concat(c),"aria-labelledby":"vertical-tab-".concat(c)},s),{},{children:a===c&&Object(n.jsx)("div",{children:t})}))},ct=function(){var e=Object(c.useState)(0),t=Object(o.a)(e,2),a=t[0],s=t[1],r=Object(c.useState)(!0),i=Object(o.a)(r,2),j=i[0],d=i[1],u=Object(c.useState)(!1),b=Object(o.a)(u,2),m=b[0],O=b[1],h=Object(c.useState)(null),p=Object(o.a)(h,2),f=p[0],g=p[1],v=Object(c.useState)(!1),k=Object(o.a)(v,2),w=k[0],S=k[1];Object(c.useEffect)((function(){ae("profile",JSON.parse(localStorage.getItem("token"))).then((function(e){y("users/"+e.data.userId,"GET",null).then((function(e){g(e.data),d(!0),O(!0)}))})).catch((function(e){d(!1),O(!0)}))}),[w]);return m?j?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(te,{}),Object(n.jsx)(We.a,{maxWidth:"lg",style:{marginTop:"48px"},children:Object(n.jsxs)(x.a,{container:!0,spacing:3,children:[Object(n.jsxs)(x.a,{item:!0,lg:4,md:6,xs:12,children:[Object(n.jsx)(He,{user:f}),Object(n.jsx)(at,{onChangeValue:function(e){s(e)}})]}),Object(n.jsxs)(x.a,{item:!0,lg:8,md:6,xs:12,children:[Object(n.jsx)(nt,{value:a,index:0,children:Object(n.jsx)(Qe,{user:f})}),Object(n.jsx)(nt,{value:a,index:1,children:Object(n.jsx)(Xe,{user:f,onReset:function(){S(!w)}})}),Object(n.jsx)(nt,{value:a,index:2,children:Object(n.jsx)(Ze,{user:f})})]})]})})]}):Object(n.jsx)(l.a,{to:{pathname:"/retro-spective-final/login",state:{type:"error",message:"You must login!",open:!0}}}):Object(n.jsx)(n.Fragment,{})},st=[{path:"/retro-spective-final/",exact:!0,main:function(){return Object(n.jsx)(ne,{})}},{path:"/retro-spective-final/login",exact:!0,main:function(e){var t=e.location;return Object(n.jsx)(Ge,{location:t})}},{path:"/retro-spective-final/signup",exact:!0,main:function(){return Object(n.jsx)(Ye,{})}},{path:"/retro-spective-final/profile",exact:!0,main:function(){return Object(n.jsx)(ct,{})}},{path:"/retro-spective-final/boards",exact:!0,main:function(e){var t=e.location;return Object(n.jsx)(Ce,{location:t})}},{path:"",exact:!1,main:function(){return Object(n.jsx)(ne,{})}}],rt=function(){return Object(n.jsx)(h.a,{basename:"/final",children:Object(n.jsx)(l.d,{children:function(e){var t=null;return e.length>0&&(t=e.map((function(e,t){return Object(n.jsx)(l.b,{path:e.path,exact:e.exact,component:e.main},t)}))),t}(st)})})},it=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,296)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),s(e),r(e)}))};i.a.render(Object(n.jsx)(rt,{}),document.getElementById("root")),it()}},[[215,1,2]]]);
//# sourceMappingURL=main.6676f6d2.chunk.js.map